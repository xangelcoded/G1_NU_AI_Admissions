(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,55867,724920,672610,156735,331461,669832,t=>{"use strict";t.s(["useCluster",()=>nQ],55867),t.s([],156735),t.s(["WebMercatorViewport",()=>nI],672610),t.s(["add",()=>h,"ceil",()=>d,"clone",()=>i,"copy",()=>s,"create",()=>a,"cross",()=>E,"dist",()=>D,"distance",()=>v,"div",()=>Z,"divide",()=>f,"dot",()=>P,"equals",()=>U,"exactEquals",()=>L,"floor",()=>M,"forEach",()=>V,"fromValues",()=>o,"inverse",()=>_,"len",()=>C,"length",()=>w,"lerp",()=>F,"max",()=>p,"min",()=>m,"mul",()=>S,"multiply",()=>c,"negate",()=>j,"normalize",()=>A,"random",()=>I,"round",()=>g,"scale",()=>b,"scaleAndAdd",()=>x,"set",()=>u,"sqrDist",()=>B,"sqrLen",()=>R,"squaredDistance",()=>y,"squaredLength",()=>q,"str",()=>O,"sub",()=>k,"subtract",()=>l,"transformMat4",()=>T,"transformQuat",()=>N,"zero",()=>z],943311);let e="undefined"!=typeof Float32Array?Float32Array:Array,n=Math.random;function r(t){return t>=0?Math.round(t):t%.5==0?Math.floor(t):Math.round(t)}function a(){let t=new e(4);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0,t[3]=0),t}function i(t){let n=new e(4);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n}function o(t,n,r,a){let i=new e(4);return i[0]=t,i[1]=n,i[2]=r,i[3]=a,i}function s(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}function u(t,e,n,r,a){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t}function h(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t}function l(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t}function c(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t[3]=e[3]*n[3],t}function f(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t[3]=e[3]/n[3],t}function d(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t[3]=Math.ceil(e[3]),t}function M(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t[3]=Math.floor(e[3]),t}function m(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t[3]=Math.min(e[3],n[3]),t}function p(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t[3]=Math.max(e[3],n[3]),t}function g(t,e){return t[0]=r(e[0]),t[1]=r(e[1]),t[2]=r(e[2]),t[3]=r(e[3]),t}function b(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t}function x(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t}function v(t,e){let n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return Math.sqrt(n*n+r*r+a*a+i*i)}function y(t,e){let n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2],i=e[3]-t[3];return n*n+r*r+a*a+i*i}function w(t){let e=t[0],n=t[1],r=t[2],a=t[3];return Math.sqrt(e*e+n*n+r*r+a*a)}function q(t){let e=t[0],n=t[1],r=t[2],a=t[3];return e*e+n*n+r*r+a*a}function j(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t[3]=-e[3],t}function _(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t[3]=1/e[3],t}function A(t,e){let n=e[0],r=e[1],a=e[2],i=e[3],o=n*n+r*r+a*a+i*i;return o>0&&(o=1/Math.sqrt(o)),t[0]=n*o,t[1]=r*o,t[2]=a*o,t[3]=i*o,t}function P(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]+t[3]*e[3]}function E(t,e,n,r){let a=n[0]*r[1]-n[1]*r[0],i=n[0]*r[2]-n[2]*r[0],o=n[0]*r[3]-n[3]*r[0],s=n[1]*r[2]-n[2]*r[1],u=n[1]*r[3]-n[3]*r[1],h=n[2]*r[3]-n[3]*r[2],l=e[0],c=e[1],f=e[2],d=e[3];return t[0]=c*h-f*u+d*s,t[1]=-(l*h)+f*o-d*i,t[2]=l*u-c*o+d*a,t[3]=-(l*s)+c*i-f*a,t}function F(t,e,n,r){let a=e[0],i=e[1],o=e[2],s=e[3];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t[3]=s+r*(n[3]-s),t}function I(t,e){let r,a,i,o,s,u;e=void 0===e?1:e;do s=(r=2*n()-1)*r+(a=2*n()-1)*a;while(s>=1)do u=(i=2*n()-1)*i+(o=2*n()-1)*o;while(u>=1)let h=Math.sqrt((1-s)/u);return t[0]=e*r,t[1]=e*a,t[2]=e*i*h,t[3]=e*o*h,t}function T(t,e,n){let r=e[0],a=e[1],i=e[2],o=e[3];return t[0]=n[0]*r+n[4]*a+n[8]*i+n[12]*o,t[1]=n[1]*r+n[5]*a+n[9]*i+n[13]*o,t[2]=n[2]*r+n[6]*a+n[10]*i+n[14]*o,t[3]=n[3]*r+n[7]*a+n[11]*i+n[15]*o,t}function N(t,e,n){let r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],u=n[2],h=n[3],l=h*r+s*i-u*a,c=h*a+u*r-o*i,f=h*i+o*a-s*r,d=-o*r-s*a-u*i;return t[0]=l*h+-(d*o)+-(c*u)- -(f*s),t[1]=c*h+-(d*s)+-(f*o)- -(l*u),t[2]=f*h+-(d*u)+-(l*s)- -(c*o),t[3]=e[3],t}function z(t){return t[0]=0,t[1]=0,t[2]=0,t[3]=0,t}function O(t){return"vec4(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(t[3],")")}function L(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]}function U(t,e){let n=t[0],r=t[1],a=t[2],i=t[3],o=e[0],s=e[1],u=e[2],h=e[3];return Math.abs(n-o)<=1e-6*Math.max(1,Math.abs(n),Math.abs(o))&&Math.abs(r-s)<=1e-6*Math.max(1,Math.abs(r),Math.abs(s))&&Math.abs(a-u)<=1e-6*Math.max(1,Math.abs(a),Math.abs(u))&&Math.abs(i-h)<=1e-6*Math.max(1,Math.abs(i),Math.abs(h))}let k=l,S=c,Z=f,D=v,B=y,C=w,R=q,V=function(){let t=a();return function(e,n,r,a,i,o){let s,u;for(n||(n=4),r||(r=0),u=a?Math.min(a*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],t[3]=e[s+3],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2],e[s+3]=t[3];return e}}();var Y=t.i(943311),Y=Y;function Q(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function X(t,e){let n=Y.transformMat4([],e,t);return Y.scale(n,n,1/n[3]),n}function K(t,e,n){return t<e?e:t>n?n:t}let G=Math.log2||function(t){return Math.log(t)*Math.LOG2E};function W(){let t=new e(16);return e!=Float32Array&&(t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0),t[0]=1,t[5]=1,t[10]=1,t[15]=1,t}function H(t){let n=new e(16);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n[3]=t[3],n[4]=t[4],n[5]=t[5],n[6]=t[6],n[7]=t[7],n[8]=t[8],n[9]=t[9],n[10]=t[10],n[11]=t[11],n[12]=t[12],n[13]=t[13],n[14]=t[14],n[15]=t[15],n}function J(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function $(t,n,r,a,i,o,s,u,h,l,c,f,d,M,m,p){let g=new e(16);return g[0]=t,g[1]=n,g[2]=r,g[3]=a,g[4]=i,g[5]=o,g[6]=s,g[7]=u,g[8]=h,g[9]=l,g[10]=c,g[11]=f,g[12]=d,g[13]=M,g[14]=m,g[15]=p,g}function tt(t,e,n,r,a,i,o,s,u,h,l,c,f,d,M,m,p){return t[0]=e,t[1]=n,t[2]=r,t[3]=a,t[4]=i,t[5]=o,t[6]=s,t[7]=u,t[8]=h,t[9]=l,t[10]=c,t[11]=f,t[12]=d,t[13]=M,t[14]=m,t[15]=p,t}function te(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tn(t,e){if(t===e){let n=e[1],r=e[2],a=e[3],i=e[6],o=e[7],s=e[11];t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=n,t[6]=e[9],t[7]=e[13],t[8]=r,t[9]=i,t[11]=e[14],t[12]=a,t[13]=o,t[14]=s}else t[0]=e[0],t[1]=e[4],t[2]=e[8],t[3]=e[12],t[4]=e[1],t[5]=e[5],t[6]=e[9],t[7]=e[13],t[8]=e[2],t[9]=e[6],t[10]=e[10],t[11]=e[14],t[12]=e[3],t[13]=e[7],t[14]=e[11],t[15]=e[15];return t}function tr(t,e){let n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],h=e[7],l=e[8],c=e[9],f=e[10],d=e[11],M=e[12],m=e[13],p=e[14],g=e[15],b=n*s-r*o,x=n*u-a*o,v=n*h-i*o,y=r*u-a*s,w=r*h-i*s,q=a*h-i*u,j=l*m-c*M,_=l*p-f*M,A=l*g-d*M,P=c*p-f*m,E=c*g-d*m,F=f*g-d*p,I=b*F-x*E+v*P+y*A-w*_+q*j;return I?(I=1/I,t[0]=(s*F-u*E+h*P)*I,t[1]=(a*E-r*F-i*P)*I,t[2]=(m*q-p*w+g*y)*I,t[3]=(f*w-c*q-d*y)*I,t[4]=(u*A-o*F-h*_)*I,t[5]=(n*F-a*A+i*_)*I,t[6]=(p*v-M*q-g*x)*I,t[7]=(l*q-f*v+d*x)*I,t[8]=(o*E-s*A+h*j)*I,t[9]=(r*A-n*E-i*j)*I,t[10]=(M*w-m*v+g*b)*I,t[11]=(c*v-l*w-d*b)*I,t[12]=(s*_-o*P-u*j)*I,t[13]=(n*P-r*_+a*j)*I,t[14]=(m*x-M*y-p*b)*I,t[15]=(l*y-c*x+f*b)*I,t):null}function ta(t,e){let n=e[0],r=e[1],a=e[2],i=e[3],o=e[4],s=e[5],u=e[6],h=e[7],l=e[8],c=e[9],f=e[10],d=e[11],M=e[12],m=e[13],p=e[14],g=e[15],b=n*s-r*o,x=n*u-a*o,v=n*h-i*o,y=r*u-a*s,w=r*h-i*s,q=a*h-i*u,j=l*m-c*M,_=l*p-f*M,A=l*g-d*M,P=c*p-f*m,E=c*g-d*m,F=f*g-d*p;return t[0]=s*F-u*E+h*P,t[1]=a*E-r*F-i*P,t[2]=m*q-p*w+g*y,t[3]=f*w-c*q-d*y,t[4]=u*A-o*F-h*_,t[5]=n*F-a*A+i*_,t[6]=p*v-M*q-g*x,t[7]=l*q-f*v+d*x,t[8]=o*E-s*A+h*j,t[9]=r*A-n*E-i*j,t[10]=M*w-m*v+g*b,t[11]=c*v-l*w-d*b,t[12]=s*_-o*P-u*j,t[13]=n*P-r*_+a*j,t[14]=m*x-M*y-p*b,t[15]=l*y-c*x+f*b,t}function ti(t){let e=t[0],n=t[1],r=t[2],a=t[3],i=t[4],o=t[5],s=t[6],u=t[7],h=t[8],l=t[9],c=t[10],f=t[11],d=t[12],M=t[13],m=t[14],p=t[15],g=e*o-n*i,b=e*s-r*i,x=n*s-r*o,v=h*M-l*d,y=h*m-c*d,w=l*m-c*M;return u*(e*w-n*y+r*v)-a*(i*w-o*y+s*v)+p*(h*x-l*b+c*g)-f*(d*x-M*b+m*g)}function to(t,e,n){let r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],h=e[6],l=e[7],c=e[8],f=e[9],d=e[10],M=e[11],m=e[12],p=e[13],g=e[14],b=e[15],x=n[0],v=n[1],y=n[2],w=n[3];return t[0]=x*r+v*s+y*c+w*m,t[1]=x*a+v*u+y*f+w*p,t[2]=x*i+v*h+y*d+w*g,t[3]=x*o+v*l+y*M+w*b,x=n[4],v=n[5],y=n[6],w=n[7],t[4]=x*r+v*s+y*c+w*m,t[5]=x*a+v*u+y*f+w*p,t[6]=x*i+v*h+y*d+w*g,t[7]=x*o+v*l+y*M+w*b,x=n[8],v=n[9],y=n[10],w=n[11],t[8]=x*r+v*s+y*c+w*m,t[9]=x*a+v*u+y*f+w*p,t[10]=x*i+v*h+y*d+w*g,t[11]=x*o+v*l+y*M+w*b,x=n[12],v=n[13],y=n[14],w=n[15],t[12]=x*r+v*s+y*c+w*m,t[13]=x*a+v*u+y*f+w*p,t[14]=x*i+v*h+y*d+w*g,t[15]=x*o+v*l+y*M+w*b,t}function ts(t,e,n){let r,a,i,o,s,u,h,l,c,f,d,M,m=n[0],p=n[1],g=n[2];return e===t?(t[12]=e[0]*m+e[4]*p+e[8]*g+e[12],t[13]=e[1]*m+e[5]*p+e[9]*g+e[13],t[14]=e[2]*m+e[6]*p+e[10]*g+e[14],t[15]=e[3]*m+e[7]*p+e[11]*g+e[15]):(r=e[0],a=e[1],i=e[2],o=e[3],s=e[4],u=e[5],h=e[6],l=e[7],c=e[8],f=e[9],d=e[10],M=e[11],t[0]=r,t[1]=a,t[2]=i,t[3]=o,t[4]=s,t[5]=u,t[6]=h,t[7]=l,t[8]=c,t[9]=f,t[10]=d,t[11]=M,t[12]=r*m+s*p+c*g+e[12],t[13]=a*m+u*p+f*g+e[13],t[14]=i*m+h*p+d*g+e[14],t[15]=o*m+l*p+M*g+e[15]),t}function tu(t,e,n){let r=n[0],a=n[1],i=n[2];return t[0]=e[0]*r,t[1]=e[1]*r,t[2]=e[2]*r,t[3]=e[3]*r,t[4]=e[4]*a,t[5]=e[5]*a,t[6]=e[6]*a,t[7]=e[7]*a,t[8]=e[8]*i,t[9]=e[9]*i,t[10]=e[10]*i,t[11]=e[11]*i,t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15],t}function th(t,e,n,r){let a,i,o,s,u,h,l,c,f,d,M,m,p,g,b,x,v,y,w,q,j,_,A,P,E=r[0],F=r[1],I=r[2],T=Math.sqrt(E*E+F*F+I*I);return T<1e-6?null:(E*=T=1/T,F*=T,I*=T,i=Math.sin(n),o=1-(a=Math.cos(n)),s=e[0],u=e[1],h=e[2],l=e[3],c=e[4],f=e[5],d=e[6],M=e[7],m=e[8],p=e[9],g=e[10],b=e[11],x=E*E*o+a,v=F*E*o+I*i,y=I*E*o-F*i,w=E*F*o-I*i,q=F*F*o+a,j=I*F*o+E*i,_=E*I*o+F*i,A=F*I*o-E*i,P=I*I*o+a,t[0]=s*x+c*v+m*y,t[1]=u*x+f*v+p*y,t[2]=h*x+d*v+g*y,t[3]=l*x+M*v+b*y,t[4]=s*w+c*q+m*j,t[5]=u*w+f*q+p*j,t[6]=h*w+d*q+g*j,t[7]=l*w+M*q+b*j,t[8]=s*_+c*A+m*P,t[9]=u*_+f*A+p*P,t[10]=h*_+d*A+g*P,t[11]=l*_+M*A+b*P,e!==t&&(t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t)}function tl(t,e,n){let r=Math.sin(n),a=Math.cos(n),i=e[4],o=e[5],s=e[6],u=e[7],h=e[8],l=e[9],c=e[10],f=e[11];return e!==t&&(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[4]=i*a+h*r,t[5]=o*a+l*r,t[6]=s*a+c*r,t[7]=u*a+f*r,t[8]=h*a-i*r,t[9]=l*a-o*r,t[10]=c*a-s*r,t[11]=f*a-u*r,t}function tc(t,e,n){let r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],u=e[3],h=e[8],l=e[9],c=e[10],f=e[11];return e!==t&&(t[4]=e[4],t[5]=e[5],t[6]=e[6],t[7]=e[7],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a-h*r,t[1]=o*a-l*r,t[2]=s*a-c*r,t[3]=u*a-f*r,t[8]=i*r+h*a,t[9]=o*r+l*a,t[10]=s*r+c*a,t[11]=u*r+f*a,t}function tf(t,e,n){let r=Math.sin(n),a=Math.cos(n),i=e[0],o=e[1],s=e[2],u=e[3],h=e[4],l=e[5],c=e[6],f=e[7];return e!==t&&(t[8]=e[8],t[9]=e[9],t[10]=e[10],t[11]=e[11],t[12]=e[12],t[13]=e[13],t[14]=e[14],t[15]=e[15]),t[0]=i*a+h*r,t[1]=o*a+l*r,t[2]=s*a+c*r,t[3]=u*a+f*r,t[4]=h*a-i*r,t[5]=l*a-o*r,t[6]=c*a-s*r,t[7]=f*a-u*r,t}function td(t,e){return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e[0],t[13]=e[1],t[14]=e[2],t[15]=1,t}function tM(t,e){return t[0]=e[0],t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=e[1],t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=e[2],t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tm(t,e,n){let r,a,i,o=n[0],s=n[1],u=n[2],h=Math.sqrt(o*o+s*s+u*u);return h<1e-6?null:(o*=h=1/h,s*=h,u*=h,a=Math.sin(e),i=1-(r=Math.cos(e)),t[0]=o*o*i+r,t[1]=s*o*i+u*a,t[2]=u*o*i-s*a,t[3]=0,t[4]=o*s*i-u*a,t[5]=s*s*i+r,t[6]=u*s*i+o*a,t[7]=0,t[8]=o*u*i+s*a,t[9]=s*u*i-o*a,t[10]=u*u*i+r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t)}function tp(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=r,t[6]=n,t[7]=0,t[8]=0,t[9]=-n,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tg(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=0,t[2]=-n,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=n,t[9]=0,t[10]=r,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tb(t,e){let n=Math.sin(e),r=Math.cos(e);return t[0]=r,t[1]=n,t[2]=0,t[3]=0,t[4]=-n,t[5]=r,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tx(t,e,n){let r=e[0],a=e[1],i=e[2],o=e[3],s=r+r,u=a+a,h=i+i,l=r*s,c=r*u,f=r*h,d=a*u,M=a*h,m=i*h,p=o*s,g=o*u,b=o*h;return t[0]=1-(d+m),t[1]=c+b,t[2]=f-g,t[3]=0,t[4]=c-b,t[5]=1-(l+m),t[6]=M+p,t[7]=0,t[8]=f+g,t[9]=M-p,t[10]=1-(l+d),t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function tv(t,n){let r=new e(3),a=-n[0],i=-n[1],o=-n[2],s=n[3],u=n[4],h=n[5],l=n[6],c=n[7],f=a*a+i*i+o*o+s*s;return f>0?(r[0]=(u*s+c*a+h*o-l*i)*2/f,r[1]=(h*s+c*i+l*a-u*o)*2/f,r[2]=(l*s+c*o+u*i-h*a)*2/f):(r[0]=(u*s+c*a+h*o-l*i)*2,r[1]=(h*s+c*i+l*a-u*o)*2,r[2]=(l*s+c*o+u*i-h*a)*2),tx(t,n,r),t}function ty(t,e){return t[0]=e[12],t[1]=e[13],t[2]=e[14],t}function tw(t,e){let n=e[0],r=e[1],a=e[2],i=e[4],o=e[5],s=e[6],u=e[8],h=e[9],l=e[10];return t[0]=Math.sqrt(n*n+r*r+a*a),t[1]=Math.sqrt(i*i+o*o+s*s),t[2]=Math.sqrt(u*u+h*h+l*l),t}function tq(t,n){let r=new e(3);tw(r,n);let a=1/r[0],i=1/r[1],o=1/r[2],s=n[0]*a,u=n[1]*i,h=n[2]*o,l=n[4]*a,c=n[5]*i,f=n[6]*o,d=n[8]*a,M=n[9]*i,m=n[10]*o,p=s+c+m,g=0;return p>0?(g=2*Math.sqrt(p+1),t[3]=.25*g,t[0]=(f-M)/g,t[1]=(d-h)/g,t[2]=(u-l)/g):s>c&&s>m?(g=2*Math.sqrt(1+s-c-m),t[3]=(f-M)/g,t[0]=.25*g,t[1]=(u+l)/g,t[2]=(d+h)/g):c>m?(g=2*Math.sqrt(1+c-s-m),t[3]=(d-h)/g,t[0]=(u+l)/g,t[1]=.25*g,t[2]=(f+M)/g):(g=2*Math.sqrt(1+m-s-c),t[3]=(u-l)/g,t[0]=(d+h)/g,t[1]=(f+M)/g,t[2]=.25*g),t}function tj(t,e,n,r){e[0]=r[12],e[1]=r[13],e[2]=r[14];let a=r[0],i=r[1],o=r[2],s=r[4],u=r[5],h=r[6],l=r[8],c=r[9],f=r[10];n[0]=Math.sqrt(a*a+i*i+o*o),n[1]=Math.sqrt(s*s+u*u+h*h),n[2]=Math.sqrt(l*l+c*c+f*f);let d=1/n[0],M=1/n[1],m=1/n[2],p=a*d,g=i*M,b=o*m,x=s*d,v=u*M,y=h*m,w=l*d,q=c*M,j=f*m,_=p+v+j,A=0;return _>0?(A=2*Math.sqrt(_+1),t[3]=.25*A,t[0]=(y-q)/A,t[1]=(w-b)/A,t[2]=(g-x)/A):p>v&&p>j?(A=2*Math.sqrt(1+p-v-j),t[3]=(y-q)/A,t[0]=.25*A,t[1]=(g+x)/A,t[2]=(w+b)/A):v>j?(A=2*Math.sqrt(1+v-p-j),t[3]=(w-b)/A,t[0]=(g+x)/A,t[1]=.25*A,t[2]=(y+q)/A):(A=2*Math.sqrt(1+j-p-v),t[3]=(g-x)/A,t[0]=(w+b)/A,t[1]=(y+q)/A,t[2]=.25*A),t}function t_(t,e,n,r){let a=e[0],i=e[1],o=e[2],s=e[3],u=a+a,h=i+i,l=o+o,c=a*u,f=a*h,d=a*l,M=i*h,m=i*l,p=o*l,g=s*u,b=s*h,x=s*l,v=r[0],y=r[1],w=r[2];return t[0]=(1-(M+p))*v,t[1]=(f+x)*v,t[2]=(d-b)*v,t[3]=0,t[4]=(f-x)*y,t[5]=(1-(c+p))*y,t[6]=(m+g)*y,t[7]=0,t[8]=(d+b)*w,t[9]=(m-g)*w,t[10]=(1-(c+M))*w,t[11]=0,t[12]=n[0],t[13]=n[1],t[14]=n[2],t[15]=1,t}function tA(t,e,n,r,a){let i=e[0],o=e[1],s=e[2],u=e[3],h=i+i,l=o+o,c=s+s,f=i*h,d=i*l,M=i*c,m=o*l,p=o*c,g=s*c,b=u*h,x=u*l,v=u*c,y=r[0],w=r[1],q=r[2],j=a[0],_=a[1],A=a[2],P=(1-(m+g))*y,E=(d+v)*y,F=(M-x)*y,I=(d-v)*w,T=(1-(f+g))*w,N=(p+b)*w,z=(M+x)*q,O=(p-b)*q,L=(1-(f+m))*q;return t[0]=P,t[1]=E,t[2]=F,t[3]=0,t[4]=I,t[5]=T,t[6]=N,t[7]=0,t[8]=z,t[9]=O,t[10]=L,t[11]=0,t[12]=n[0]+j-(P*j+I*_+z*A),t[13]=n[1]+_-(E*j+T*_+O*A),t[14]=n[2]+A-(F*j+N*_+L*A),t[15]=1,t}function tP(t,e){let n=e[0],r=e[1],a=e[2],i=e[3],o=n+n,s=r+r,u=a+a,h=n*o,l=r*o,c=r*s,f=a*o,d=a*s,M=a*u,m=i*o,p=i*s,g=i*u;return t[0]=1-c-M,t[1]=l+g,t[2]=f-p,t[3]=0,t[4]=l-g,t[5]=1-h-M,t[6]=d+m,t[7]=0,t[8]=f+p,t[9]=d-m,t[10]=1-h-c,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,t}function tE(t,e,n,r,a,i,o){let s=1/(n-e),u=1/(a-r),h=1/(i-o);return t[0]=2*i*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=2*i*u,t[6]=0,t[7]=0,t[8]=(n+e)*s,t[9]=(a+r)*u,t[10]=(o+i)*h,t[11]=-1,t[12]=0,t[13]=0,t[14]=o*i*2*h,t[15]=0,t}function tF(t,e,n,r,a){let i=1/Math.tan(e/2);if(t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0){let e=1/(r-a);t[10]=(a+r)*e,t[14]=2*a*r*e}else t[10]=-1,t[14]=-2*r;return t}t.s(["add",()=>tD,"adjoint",()=>ta,"clone",()=>H,"copy",()=>J,"create",()=>W,"decompose",()=>tj,"determinant",()=>ti,"equals",()=>tY,"exactEquals",()=>tV,"frob",()=>tZ,"fromQuat",()=>tP,"fromQuat2",()=>tv,"fromRotation",()=>tm,"fromRotationTranslation",()=>tx,"fromRotationTranslationScale",()=>t_,"fromRotationTranslationScaleOrigin",()=>tA,"fromScaling",()=>tM,"fromTranslation",()=>td,"fromValues",()=>$,"fromXRotation",()=>tp,"fromYRotation",()=>tg,"fromZRotation",()=>tb,"frustum",()=>tE,"getRotation",()=>tq,"getScaling",()=>tw,"getTranslation",()=>ty,"identity",()=>te,"invert",()=>tr,"lookAt",()=>tU,"mul",()=>tQ,"multiply",()=>to,"multiplyScalar",()=>tC,"multiplyScalarAndAdd",()=>tR,"ortho",()=>tO,"orthoNO",()=>tz,"orthoZO",()=>tL,"perspective",()=>tI,"perspectiveFromFieldOfView",()=>tN,"perspectiveNO",()=>tF,"perspectiveZO",()=>tT,"rotate",()=>th,"rotateX",()=>tl,"rotateY",()=>tc,"rotateZ",()=>tf,"scale",()=>tu,"set",()=>tt,"str",()=>tS,"sub",()=>tX,"subtract",()=>tB,"targetTo",()=>tk,"translate",()=>ts,"transpose",()=>tn],102817);let tI=tF;function tT(t,e,n,r,a){let i=1/Math.tan(e/2);if(t[0]=i/n,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[11]=-1,t[12]=0,t[13]=0,t[15]=0,null!=a&&a!==1/0){let e=1/(r-a);t[10]=a*e,t[14]=a*r*e}else t[10]=-1,t[14]=-r;return t}function tN(t,e,n,r){let a=Math.tan(e.upDegrees*Math.PI/180),i=Math.tan(e.downDegrees*Math.PI/180),o=Math.tan(e.leftDegrees*Math.PI/180),s=Math.tan(e.rightDegrees*Math.PI/180),u=2/(o+s),h=2/(a+i);return t[0]=u,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=h,t[6]=0,t[7]=0,t[8]=-((o-s)*u*.5),t[9]=(a-i)*h*.5,t[10]=r/(n-r),t[11]=-1,t[12]=0,t[13]=0,t[14]=r*n/(n-r),t[15]=0,t}function tz(t,e,n,r,a,i,o){let s=1/(e-n),u=1/(r-a),h=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=2*h,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*u,t[14]=(o+i)*h,t[15]=1,t}let tO=tz;function tL(t,e,n,r,a,i,o){let s=1/(e-n),u=1/(r-a),h=1/(i-o);return t[0]=-2*s,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=-2*u,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=h,t[11]=0,t[12]=(e+n)*s,t[13]=(a+r)*u,t[14]=i*h,t[15]=1,t}function tU(t,e,n,r){let a,i,o,s,u,h,l,c,f,d,M=e[0],m=e[1],p=e[2],g=r[0],b=r[1],x=r[2],v=n[0],y=n[1],w=n[2];return 1e-6>Math.abs(M-v)&&1e-6>Math.abs(m-y)&&1e-6>Math.abs(p-w)?te(t):(a=1/Math.sqrt((c=M-v)*c+(f=m-y)*f+(d=p-w)*d),c*=a,f*=a,d*=a,(a=Math.sqrt((i=b*d-x*f)*i+(o=x*c-g*d)*o+(s=g*f-b*c)*s))?(i*=a=1/a,o*=a,s*=a):(i=0,o=0,s=0),(a=Math.sqrt((u=f*s-d*o)*u+(h=d*i-c*s)*h+(l=c*o-f*i)*l))?(u*=a=1/a,h*=a,l*=a):(u=0,h=0,l=0),t[0]=i,t[1]=u,t[2]=c,t[3]=0,t[4]=o,t[5]=h,t[6]=f,t[7]=0,t[8]=s,t[9]=l,t[10]=d,t[11]=0,t[12]=-(i*M+o*m+s*p),t[13]=-(u*M+h*m+l*p),t[14]=-(c*M+f*m+d*p),t[15]=1,t)}function tk(t,e,n,r){let a=e[0],i=e[1],o=e[2],s=r[0],u=r[1],h=r[2],l=a-n[0],c=i-n[1],f=o-n[2],d=l*l+c*c+f*f;d>0&&(l*=d=1/Math.sqrt(d),c*=d,f*=d);let M=u*f-h*c,m=h*l-s*f,p=s*c-u*l;return(d=M*M+m*m+p*p)>0&&(M*=d=1/Math.sqrt(d),m*=d,p*=d),t[0]=M,t[1]=m,t[2]=p,t[3]=0,t[4]=c*p-f*m,t[5]=f*M-l*p,t[6]=l*m-c*M,t[7]=0,t[8]=l,t[9]=c,t[10]=f,t[11]=0,t[12]=a,t[13]=i,t[14]=o,t[15]=1,t}function tS(t){return"mat4(".concat(t[0],", ").concat(t[1],", ").concat(t[2],", ").concat(t[3],", ").concat(t[4],", ").concat(t[5],", ").concat(t[6],", ").concat(t[7],", ").concat(t[8],", ").concat(t[9],", ").concat(t[10],", ").concat(t[11],", ").concat(t[12],", ").concat(t[13],", ").concat(t[14],", ").concat(t[15],")")}function tZ(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]+t[3]*t[3]+t[4]*t[4]+t[5]*t[5]+t[6]*t[6]+t[7]*t[7]+t[8]*t[8]+t[9]*t[9]+t[10]*t[10]+t[11]*t[11]+t[12]*t[12]+t[13]*t[13]+t[14]*t[14]+t[15]*t[15])}function tD(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t[3]=e[3]+n[3],t[4]=e[4]+n[4],t[5]=e[5]+n[5],t[6]=e[6]+n[6],t[7]=e[7]+n[7],t[8]=e[8]+n[8],t[9]=e[9]+n[9],t[10]=e[10]+n[10],t[11]=e[11]+n[11],t[12]=e[12]+n[12],t[13]=e[13]+n[13],t[14]=e[14]+n[14],t[15]=e[15]+n[15],t}function tB(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t[3]=e[3]-n[3],t[4]=e[4]-n[4],t[5]=e[5]-n[5],t[6]=e[6]-n[6],t[7]=e[7]-n[7],t[8]=e[8]-n[8],t[9]=e[9]-n[9],t[10]=e[10]-n[10],t[11]=e[11]-n[11],t[12]=e[12]-n[12],t[13]=e[13]-n[13],t[14]=e[14]-n[14],t[15]=e[15]-n[15],t}function tC(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t[3]=e[3]*n,t[4]=e[4]*n,t[5]=e[5]*n,t[6]=e[6]*n,t[7]=e[7]*n,t[8]=e[8]*n,t[9]=e[9]*n,t[10]=e[10]*n,t[11]=e[11]*n,t[12]=e[12]*n,t[13]=e[13]*n,t[14]=e[14]*n,t[15]=e[15]*n,t}function tR(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t[3]=e[3]+n[3]*r,t[4]=e[4]+n[4]*r,t[5]=e[5]+n[5]*r,t[6]=e[6]+n[6]*r,t[7]=e[7]+n[7]*r,t[8]=e[8]+n[8]*r,t[9]=e[9]+n[9]*r,t[10]=e[10]+n[10]*r,t[11]=e[11]+n[11]*r,t[12]=e[12]+n[12]*r,t[13]=e[13]+n[13]*r,t[14]=e[14]+n[14]*r,t[15]=e[15]+n[15]*r,t}function tV(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]&&t[4]===e[4]&&t[5]===e[5]&&t[6]===e[6]&&t[7]===e[7]&&t[8]===e[8]&&t[9]===e[9]&&t[10]===e[10]&&t[11]===e[11]&&t[12]===e[12]&&t[13]===e[13]&&t[14]===e[14]&&t[15]===e[15]}function tY(t,e){let n=t[0],r=t[1],a=t[2],i=t[3],o=t[4],s=t[5],u=t[6],h=t[7],l=t[8],c=t[9],f=t[10],d=t[11],M=t[12],m=t[13],p=t[14],g=t[15],b=e[0],x=e[1],v=e[2],y=e[3],w=e[4],q=e[5],j=e[6],_=e[7],A=e[8],P=e[9],E=e[10],F=e[11],I=e[12],T=e[13],N=e[14],z=e[15];return Math.abs(n-b)<=1e-6*Math.max(1,Math.abs(n),Math.abs(b))&&Math.abs(r-x)<=1e-6*Math.max(1,Math.abs(r),Math.abs(x))&&Math.abs(a-v)<=1e-6*Math.max(1,Math.abs(a),Math.abs(v))&&Math.abs(i-y)<=1e-6*Math.max(1,Math.abs(i),Math.abs(y))&&Math.abs(o-w)<=1e-6*Math.max(1,Math.abs(o),Math.abs(w))&&Math.abs(s-q)<=1e-6*Math.max(1,Math.abs(s),Math.abs(q))&&Math.abs(u-j)<=1e-6*Math.max(1,Math.abs(u),Math.abs(j))&&Math.abs(h-_)<=1e-6*Math.max(1,Math.abs(h),Math.abs(_))&&Math.abs(l-A)<=1e-6*Math.max(1,Math.abs(l),Math.abs(A))&&Math.abs(c-P)<=1e-6*Math.max(1,Math.abs(c),Math.abs(P))&&Math.abs(f-E)<=1e-6*Math.max(1,Math.abs(f),Math.abs(E))&&Math.abs(d-F)<=1e-6*Math.max(1,Math.abs(d),Math.abs(F))&&Math.abs(M-I)<=1e-6*Math.max(1,Math.abs(M),Math.abs(I))&&Math.abs(m-T)<=1e-6*Math.max(1,Math.abs(m),Math.abs(T))&&Math.abs(p-N)<=1e-6*Math.max(1,Math.abs(p),Math.abs(N))&&Math.abs(g-z)<=1e-6*Math.max(1,Math.abs(g),Math.abs(z))}let tQ=to,tX=tB;var tK=t.i(102817),tK=tK;function tG(){let t=new e(2);return e!=Float32Array&&(t[0]=0,t[1]=0),t}function tW(t){let n=new e(2);return n[0]=t[0],n[1]=t[1],n}function tH(t,n){let r=new e(2);return r[0]=t,r[1]=n,r}function tJ(t,e){return t[0]=e[0],t[1]=e[1],t}function t$(t,e,n){return t[0]=e,t[1]=n,t}function t1(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function t0(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function t2(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t}function t3(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t}function t5(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t}function t4(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t}function t6(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function t8(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}function t7(t,e){return t[0]=r(e[0]),t[1]=r(e[1]),t}function t9(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function et(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t}function ee(t,e){let n=e[0]-t[0],r=e[1]-t[1];return Math.sqrt(n*n+r*r)}function en(t,e){let n=e[0]-t[0],r=e[1]-t[1];return n*n+r*r}function er(t){let e=t[0],n=t[1];return Math.sqrt(e*e+n*n)}function ea(t){let e=t[0],n=t[1];return e*e+n*n}function ei(t,e){return t[0]=-e[0],t[1]=-e[1],t}function eo(t,e){return t[0]=1/e[0],t[1]=1/e[1],t}function es(t,e){let n=e[0],r=e[1],a=n*n+r*r;return a>0&&(a=1/Math.sqrt(a)),t[0]=e[0]*a,t[1]=e[1]*a,t}function eu(t,e){return t[0]*e[0]+t[1]*e[1]}function eh(t,e,n){let r=e[0]*n[1]-e[1]*n[0];return t[0]=t[1]=0,t[2]=r,t}function el(t,e,n,r){let a=e[0],i=e[1];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t}function ec(t,e){e=void 0===e?1:e;let r=2*n()*Math.PI;return t[0]=Math.cos(r)*e,t[1]=Math.sin(r)*e,t}function ef(t,e,n){let r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a,t[1]=n[1]*r+n[3]*a,t}function ed(t,e,n){let r=e[0],a=e[1];return t[0]=n[0]*r+n[2]*a+n[4],t[1]=n[1]*r+n[3]*a+n[5],t}function eM(t,e,n){let r=e[0],a=e[1];return t[0]=n[0]*r+n[3]*a+n[6],t[1]=n[1]*r+n[4]*a+n[7],t}function em(t,e,n){let r=e[0],a=e[1];return t[0]=n[0]*r+n[4]*a+n[12],t[1]=n[1]*r+n[5]*a+n[13],t}function ep(t,e,n,r){let a=e[0]-n[0],i=e[1]-n[1],o=Math.sin(r),s=Math.cos(r);return t[0]=a*s-i*o+n[0],t[1]=a*o+i*s+n[1],t}function eg(t,e){let n=t[0],r=t[1],a=e[0],i=e[1],o=Math.sqrt((n*n+r*r)*(a*a+i*i));return Math.acos(Math.min(Math.max(o&&(n*a+r*i)/o,-1),1))}function eb(t){return t[0]=0,t[1]=0,t}function ex(t){return"vec2(".concat(t[0],", ").concat(t[1],")")}function ev(t,e){return t[0]===e[0]&&t[1]===e[1]}function ey(t,e){let n=t[0],r=t[1],a=e[0],i=e[1];return Math.abs(n-a)<=1e-6*Math.max(1,Math.abs(n),Math.abs(a))&&Math.abs(r-i)<=1e-6*Math.max(1,Math.abs(r),Math.abs(i))}t.s(["add",()=>t1,"angle",()=>eg,"ceil",()=>t5,"clone",()=>tW,"copy",()=>tJ,"create",()=>tG,"cross",()=>eh,"dist",()=>eA,"distance",()=>ee,"div",()=>e_,"divide",()=>t3,"dot",()=>eu,"equals",()=>ey,"exactEquals",()=>ev,"floor",()=>t4,"forEach",()=>eF,"fromValues",()=>tH,"inverse",()=>eo,"len",()=>ew,"length",()=>er,"lerp",()=>el,"max",()=>t8,"min",()=>t6,"mul",()=>ej,"multiply",()=>t2,"negate",()=>ei,"normalize",()=>es,"random",()=>ec,"rotate",()=>ep,"round",()=>t7,"scale",()=>t9,"scaleAndAdd",()=>et,"set",()=>t$,"sqrDist",()=>eP,"sqrLen",()=>eE,"squaredDistance",()=>en,"squaredLength",()=>ea,"str",()=>ex,"sub",()=>eq,"subtract",()=>t0,"transformMat2",()=>ef,"transformMat2d",()=>ed,"transformMat3",()=>eM,"transformMat4",()=>em,"zero",()=>eb],210142);let ew=er,eq=t0,ej=t2,e_=t3,eA=ee,eP=en,eE=ea,eF=function(){let t=tG();return function(e,n,r,a,i,o){let s,u;for(n||(n=2),r||(r=0),u=a?Math.min(a*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],i(t,t,o),e[s]=t[0],e[s+1]=t[1];return e}}();var eI=t.i(210142),eI=eI;function eT(){let t=new e(3);return e!=Float32Array&&(t[0]=0,t[1]=0,t[2]=0),t}function eN(t){let n=new e(3);return n[0]=t[0],n[1]=t[1],n[2]=t[2],n}function ez(t){let e=t[0],n=t[1],r=t[2];return Math.sqrt(e*e+n*n+r*r)}function eO(t,n,r){let a=new e(3);return a[0]=t,a[1]=n,a[2]=r,a}function eL(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t}function eU(t,e,n,r){return t[0]=e,t[1]=n,t[2]=r,t}function ek(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t[2]=e[2]+n[2],t}function eS(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t[2]=e[2]-n[2],t}function eZ(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t[2]=e[2]*n[2],t}function eD(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t[2]=e[2]/n[2],t}function eB(t,e){return t[0]=Math.ceil(e[0]),t[1]=Math.ceil(e[1]),t[2]=Math.ceil(e[2]),t}function eC(t,e){return t[0]=Math.floor(e[0]),t[1]=Math.floor(e[1]),t[2]=Math.floor(e[2]),t}function eR(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t[2]=Math.min(e[2],n[2]),t}function eV(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t[2]=Math.max(e[2],n[2]),t}function eY(t,e){return t[0]=r(e[0]),t[1]=r(e[1]),t[2]=r(e[2]),t}function eQ(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t[2]=e[2]*n,t}function eX(t,e,n,r){return t[0]=e[0]+n[0]*r,t[1]=e[1]+n[1]*r,t[2]=e[2]+n[2]*r,t}function eK(t,e){let n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return Math.sqrt(n*n+r*r+a*a)}function eG(t,e){let n=e[0]-t[0],r=e[1]-t[1],a=e[2]-t[2];return n*n+r*r+a*a}function eW(t){let e=t[0],n=t[1],r=t[2];return e*e+n*n+r*r}function eH(t,e){return t[0]=-e[0],t[1]=-e[1],t[2]=-e[2],t}function eJ(t,e){return t[0]=1/e[0],t[1]=1/e[1],t[2]=1/e[2],t}function e$(t,e){let n=e[0],r=e[1],a=e[2],i=n*n+r*r+a*a;return i>0&&(i=1/Math.sqrt(i)),t[0]=e[0]*i,t[1]=e[1]*i,t[2]=e[2]*i,t}function e1(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function e0(t,e,n){let r=e[0],a=e[1],i=e[2],o=n[0],s=n[1],u=n[2];return t[0]=a*u-i*s,t[1]=i*o-r*u,t[2]=r*s-a*o,t}function e2(t,e,n,r){let a=e[0],i=e[1],o=e[2];return t[0]=a+r*(n[0]-a),t[1]=i+r*(n[1]-i),t[2]=o+r*(n[2]-o),t}function e3(t,e,n,r){let a=Math.acos(Math.min(Math.max(e1(e,n),-1),1)),i=Math.sin(a),o=Math.sin((1-r)*a)/i,s=Math.sin(r*a)/i;return t[0]=o*e[0]+s*n[0],t[1]=o*e[1]+s*n[1],t[2]=o*e[2]+s*n[2],t}function e5(t,e,n,r,a,i){let o=i*i,s=o*(2*i-3)+1,u=o*(i-2)+i,h=o*(i-1),l=o*(3-2*i);return t[0]=e[0]*s+n[0]*u+r[0]*h+a[0]*l,t[1]=e[1]*s+n[1]*u+r[1]*h+a[1]*l,t[2]=e[2]*s+n[2]*u+r[2]*h+a[2]*l,t}function e4(t,e,n,r,a,i){let o=1-i,s=o*o,u=i*i,h=s*o,l=3*i*s,c=3*u*o,f=u*i;return t[0]=e[0]*h+n[0]*l+r[0]*c+a[0]*f,t[1]=e[1]*h+n[1]*l+r[1]*c+a[1]*f,t[2]=e[2]*h+n[2]*l+r[2]*c+a[2]*f,t}function e6(t,e){e=void 0===e?1:e;let r=2*n()*Math.PI,a=2*n()-1,i=Math.sqrt(1-a*a)*e;return t[0]=Math.cos(r)*i,t[1]=Math.sin(r)*i,t[2]=a*e,t}function e8(t,e,n){let r=e[0],a=e[1],i=e[2],o=n[3]*r+n[7]*a+n[11]*i+n[15];return o=o||1,t[0]=(n[0]*r+n[4]*a+n[8]*i+n[12])/o,t[1]=(n[1]*r+n[5]*a+n[9]*i+n[13])/o,t[2]=(n[2]*r+n[6]*a+n[10]*i+n[14])/o,t}function e7(t,e,n){let r=e[0],a=e[1],i=e[2];return t[0]=r*n[0]+a*n[3]+i*n[6],t[1]=r*n[1]+a*n[4]+i*n[7],t[2]=r*n[2]+a*n[5]+i*n[8],t}function e9(t,e,n){let r=n[0],a=n[1],i=n[2],o=n[3],s=e[0],u=e[1],h=e[2],l=a*h-i*u,c=i*s-r*h,f=r*u-a*s,d=a*f-i*c,M=i*l-r*f,m=r*c-a*l,p=2*o;return l*=p,c*=p,f*=p,d*=2,M*=2,m*=2,t[0]=s+l+d,t[1]=u+c+M,t[2]=h+f+m,t}function nt(t,e,n,r){let a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0],i[1]=a[1]*Math.cos(r)-a[2]*Math.sin(r),i[2]=a[1]*Math.sin(r)+a[2]*Math.cos(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function ne(t,e,n,r){let a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[2]*Math.sin(r)+a[0]*Math.cos(r),i[1]=a[1],i[2]=a[2]*Math.cos(r)-a[0]*Math.sin(r),t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function nn(t,e,n,r){let a=[],i=[];return a[0]=e[0]-n[0],a[1]=e[1]-n[1],a[2]=e[2]-n[2],i[0]=a[0]*Math.cos(r)-a[1]*Math.sin(r),i[1]=a[0]*Math.sin(r)+a[1]*Math.cos(r),i[2]=a[2],t[0]=i[0]+n[0],t[1]=i[1]+n[1],t[2]=i[2]+n[2],t}function nr(t,e){let n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2],u=Math.sqrt((n*n+r*r+a*a)*(i*i+o*o+s*s));return Math.acos(Math.min(Math.max(u&&e1(t,e)/u,-1),1))}function na(t){return t[0]=0,t[1]=0,t[2]=0,t}function ni(t){return"vec3(".concat(t[0],", ").concat(t[1],", ").concat(t[2],")")}function no(t,e){return t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]}function ns(t,e){let n=t[0],r=t[1],a=t[2],i=e[0],o=e[1],s=e[2];return Math.abs(n-i)<=1e-6*Math.max(1,Math.abs(n),Math.abs(i))&&Math.abs(r-o)<=1e-6*Math.max(1,Math.abs(r),Math.abs(o))&&Math.abs(a-s)<=1e-6*Math.max(1,Math.abs(a),Math.abs(s))}t.s(["add",()=>ek,"angle",()=>nr,"bezier",()=>e4,"ceil",()=>eB,"clone",()=>eN,"copy",()=>eL,"create",()=>eT,"cross",()=>e0,"dist",()=>nc,"distance",()=>eK,"div",()=>nl,"divide",()=>eD,"dot",()=>e1,"equals",()=>ns,"exactEquals",()=>no,"floor",()=>eC,"forEach",()=>nm,"fromValues",()=>eO,"hermite",()=>e5,"inverse",()=>eJ,"len",()=>nd,"length",()=>ez,"lerp",()=>e2,"max",()=>eV,"min",()=>eR,"mul",()=>nh,"multiply",()=>eZ,"negate",()=>eH,"normalize",()=>e$,"random",()=>e6,"rotateX",()=>nt,"rotateY",()=>ne,"rotateZ",()=>nn,"round",()=>eY,"scale",()=>eQ,"scaleAndAdd",()=>eX,"set",()=>eU,"slerp",()=>e3,"sqrDist",()=>nf,"sqrLen",()=>nM,"squaredDistance",()=>eG,"squaredLength",()=>eW,"str",()=>ni,"sub",()=>nu,"subtract",()=>eS,"transformMat3",()=>e7,"transformMat4",()=>e8,"transformQuat",()=>e9,"zero",()=>na],429851);let nu=eS,nh=eZ,nl=eD,nc=eK,nf=eG,nd=ez,nM=eW,nm=function(){let t=eT();return function(e,n,r,a,i,o){let s,u;for(n||(n=3),r||(r=0),u=a?Math.min(a*n+r,e.length):e.length,s=r;s<u;s+=n)t[0]=e[s],t[1]=e[s+1],t[2]=e[s+2],i(t,t,o),e[s]=t[0],e[s+1]=t[1],e[s+2]=t[2];return e}}();var np=t.i(429851),np=np;function ng(t,e){if(!t)throw Error(e||"@math.gl/web-mercator: assertion failed.")}let nb=Math.PI,nx=nb/4,nv=nb/180,ny=180/nb;function nw(t){let[e,n]=t;ng(Number.isFinite(e)),ng(Number.isFinite(n)&&n>=-90&&n<=90,"invalid latitude");let r=512*(nb+Math.log(Math.tan(nx+n*nv*.5)))/(2*nb);return[512*(e*nv+nb)/(2*nb),r]}function nq(t){let[e,n]=t,r=2*(Math.atan(Math.exp(n/512*(2*nb)-nb))-nx);return[(e/512*(2*nb)-nb)*ny,r*ny]}function nj(t){return 2*Math.atan(.5/t)*ny}function n_(t){return .5/Math.tan(.5*t*nv)}function nA(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,[r,a,i]=t;if(ng(Number.isFinite(r)&&Number.isFinite(a),"invalid pixel coordinate"),Number.isFinite(i))return X(e,[r,a,i,1]);let o=X(e,[r,a,0,1]),s=X(e,[r,a,1,1]),u=o[2],h=s[2];return eI.lerp([],o,s,u===h?0:((n||0)-u)/(h-u))}function nP(t){let{width:e,height:n,bounds:r,minExtent:a=0,maxZoom:i=24,offset:o=[0,0]}=t,[[s,u],[h,l]]=r,c=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return"number"==typeof t?{top:t,bottom:t,left:t,right:t}:(ng(Number.isFinite(t.top)&&Number.isFinite(t.bottom)&&Number.isFinite(t.left)&&Number.isFinite(t.right)),t)}(t.padding),f=nw([s,K(l,-85.051129,85.051129)]),d=nw([h,K(u,-85.051129,85.051129)]),M=[Math.max(Math.abs(d[0]-f[0]),a),Math.max(Math.abs(d[1]-f[1]),a)],m=[e-c.left-c.right-2*Math.abs(o[0]),n-c.top-c.bottom-2*Math.abs(o[1])];ng(m[0]>0&&m[1]>0);let p=m[0]/M[0],g=m[1]/M[1],b=(c.right-c.left)/2/p,x=(c.top-c.bottom)/2/g,v=nq([(d[0]+f[0])/2+b,(d[1]+f[1])/2+x]),y=Math.min(i,G(Math.abs(Math.min(p,g))));return ng(Number.isFinite(y)),{longitude:v[0],latitude:v[1],zoom:y}}t.s(["fitBounds",()=>nP],724920);var eI=eI;let nE=Math.PI/180;function nF(t,e,n){let{pixelUnprojectionMatrix:r}=t,a=X(r,[e,0,1,1]),i=X(r,[e,t.height,1,1]),o=(n*t.distanceScales.unitsPerMeter[2]-a[2])/(i[2]-a[2]),s=nq(eI.lerp([],a,i,o));return s.push(n),s}var tK=tK,eI=eI,np=np;class nI{_initMatrices(){let{width:t,height:e,projectionMatrix:n,viewMatrix:r}=this,a=Q();tK.multiply(a,a,n),tK.multiply(a,a,r),this.viewProjectionMatrix=a;let i=Q();tK.scale(i,i,[t/2,-e/2,1]),tK.translate(i,i,[1,-1,0]),tK.multiply(i,i,a);let o=tK.invert(Q(),i);if(!o)throw Error("Pixel project matrix not invertible");this.pixelProjectionMatrix=i,this.pixelUnprojectionMatrix=o}projectFlat(t){return nw(t)}unprojectFlat(t){return nq(t)}getMapCenterByLngLatPosition(t){let{lngLat:e,pos:n}=t,r=nA(n,this.pixelUnprojectionMatrix),a=nw(e),i=eI.add([],a,eI.negate([],r));return nq(eI.add([],this.center,i))}fitBounds(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{width:n,height:r}=this,{longitude:a,latitude:i,zoom:o}=nP(Object.assign({width:n,height:r,bounds:t},e));return new nI({width:n,height:r,longitude:a,latitude:i,zoom:o})}getBounds(t){let e=this.getBoundingRegion(t),n=Math.min(...e.map(t=>t[0])),r=Math.max(...e.map(t=>t[0]));return[[n,Math.min(...e.map(t=>t[1]))],[r,Math.max(...e.map(t=>t[1]))]]}getBoundingRegion(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){let e,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,{width:a,height:i,unproject:o}=t,s={targetZ:r},u=o([0,i],s),h=o([a,i],s);return(t.fovy?.5*t.fovy*nE:Math.atan(.5/t.altitude))>(90-t.pitch)*nE-.01?(e=nF(t,0,r),n=nF(t,a,r)):(e=o([0,0],s),n=o([a,0],s)),[u,h,n,e]}(this,t.z||0)}getLocationAtPoint(t){let{lngLat:e,pos:n}=t;return this.getMapCenterByLngLatPosition({lngLat:e,pos:n})}constructor(t={width:1,height:1}){var e=this;this.equals=t=>t instanceof nI&&t.width===this.width&&t.height===this.height&&tK.equals(t.projectionMatrix,this.projectionMatrix)&&tK.equals(t.viewMatrix,this.viewMatrix),this.project=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{topLeft:r=!0}=n,a=function(t,e){let[n,r,a=0]=t;return ng(Number.isFinite(n)&&Number.isFinite(r)&&Number.isFinite(a)),X(e,[n,r,a,1])}(e.projectPosition(t),e.pixelProjectionMatrix),[i,o]=a,s=r?o:e.height-o;return 2===t.length?[i,s]:[i,s,a[2]]},this.unproject=function(t){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{topLeft:r=!0,targetZ:a}=n,[i,o,s]=t,u=r?o:e.height-o,h=a&&a*e.distanceScales.unitsPerMeter[2],l=nA([i,u,s],e.pixelUnprojectionMatrix,h),[c,f,d]=e.unprojectPosition(l);return Number.isFinite(s)?[c,f,d]:Number.isFinite(a)?[c,f,a]:[c,f]},this.projectPosition=t=>{let[e,n]=nw(t);return[e,n,(t[2]||0)*this.distanceScales.unitsPerMeter[2]]},this.unprojectPosition=t=>{let[e,n]=nq(t);return[e,n,(t[2]||0)*this.distanceScales.metersPerUnit[2]]};let{width:n,height:r,altitude:a=null,fovy:i=null}=t,{latitude:o=0,longitude:s=0,zoom:u=0,pitch:h=0,bearing:l=0,position:c=null,nearZMultiplier:f=.02,farZMultiplier:d=1.01}=t;n=n||1,r=r||1,null===i&&null===a?i=nj(a=1.5):null===i?i=nj(a):null===a&&(a=n_(i));let M=Math.pow(2,u);a=Math.max(.75,a);let m=function(t){let{latitude:e,longitude:n,highPrecision:r=!1}=t;ng(Number.isFinite(e)&&Number.isFinite(n));let a=Math.cos(e*nv),i=512/360/a,o=512/4003e4/a,s={unitsPerMeter:[o,o,o],metersPerUnit:[1/o,1/o,1/o],unitsPerDegree:[512/360,i,o],degreesPerUnit:[1/(512/360),1/i,1/o]};if(r){let t=nv*Math.tan(e*nv)/a,n=512/4003e4*t,r=n/i*o;s.unitsPerDegree2=[0,512/360*t/2,n],s.unitsPerMeter2=[r,0,r]}return s}({longitude:s,latitude:o}),p=nw([s,o]);p.push(0),c&&np.add(p,p,np.mul([],c,m.unitsPerMeter)),this.projectionMatrix=function(t){let{fov:e,aspect:n,near:r,far:a}=function(t){let{width:e,height:n,altitude:r,pitch:a=0,offset:i,center:o,scale:s,nearZMultiplier:u=1,farZMultiplier:h=1}=t,{fovy:l=nj(1.5)}=t;void 0!==r&&(l=nj(r));let c=l*nv,f=a*nv,d=n_(l),M=d;o&&(M+=o[2]*s/Math.cos(f)/n);let m=c*(.5+(i?i[1]:0)/n),p=Math.sin(m)*M/Math.sin(K(Math.PI/2-f-m,.01,Math.PI-.01));return{fov:c,aspect:e/n,focalDistance:d,near:u,far:Math.min((Math.sin(f)*p+M)*h,10*M)}}(t);return tK.perspective([],e,n,r,a)}({width:n,height:r,scale:M,center:p,pitch:h,fovy:i,nearZMultiplier:f,farZMultiplier:d}),this.viewMatrix=function(t){let{height:e,pitch:n,bearing:r,altitude:a,scale:i,center:o}=t,s=Q();tK.translate(s,s,[0,0,-a]),tK.rotateX(s,s,-n*nv),tK.rotateZ(s,s,r*nv);let u=i/e;return tK.scale(s,s,[u,u,u]),o&&tK.translate(s,s,np.negate([],o)),s}({height:r,scale:M,center:p,pitch:h,bearing:l,altitude:a}),this.width=n,this.height=r,this.scale=M,this.latitude=o,this.longitude=s,this.zoom=u,this.pitch=h,this.bearing=l,this.altitude=a,this.fovy=i,this.center=p,this.meterOffset=c||[0,0,0],this.distanceScales=m,this._initMatrices(),Object.freeze(this)}}var eI=eI,nT=t.i(620317),nN=t.i(191788);let nz=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class nO{static from(t){if(!(t instanceof ArrayBuffer))throw Error("Data must be an instance of ArrayBuffer.");let[e,n]=new Uint8Array(t,0,2);if(219!==e)throw Error("Data does not appear to be in a KDBush format.");let r=n>>4;if(1!==r)throw Error("Got v".concat(r," data when expected v").concat(1,"."));let a=nz[15&n];if(!a)throw Error("Unrecognized array type.");let[i]=new Uint16Array(t,2,1),[o]=new Uint32Array(t,4,1);return new nO(o,i,a,t)}add(t,e){let n=this._pos>>1;return this.ids[n]=n,this.coords[this._pos++]=t,this.coords[this._pos++]=e,n}finish(){let t=this._pos>>1;if(t!==this.numItems)throw Error("Added ".concat(t," items when expected ").concat(this.numItems,"."));return function t(e,n,r,a,i,o){if(i-a<=r)return;let s=a+i>>1;(function t(e,n,r,a,i,o){for(;i>a;){if(i-a>600){let s=i-a+1,u=r-a+1,h=Math.log(s),l=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*l*(s-l)/s)*(u-s/2<0?-1:1),f=Math.max(a,Math.floor(r-u*l/s+c)),d=Math.min(i,Math.floor(r+(s-u)*l/s+c));t(e,n,r,f,d,o)}let s=n[2*r+o],u=a,h=i;for(nL(e,n,a,r),n[2*i+o]>s&&nL(e,n,a,i);u<h;){for(nL(e,n,u,h),u++,h--;n[2*u+o]<s;)u++;for(;n[2*h+o]>s;)h--}n[2*a+o]===s?nL(e,n,a,h):nL(e,n,++h,i),h<=r&&(a=h+1),r<=h&&(i=h-1)}})(e,n,s,a,i,o),t(e,n,r,a,s-1,1-o),t(e,n,r,s+1,i,1-o)}(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(t,e,n,r){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");let{ids:a,coords:i,nodeSize:o}=this,s=[0,a.length-1,0],u=[];for(;s.length;){let h=s.pop()||0,l=s.pop()||0,c=s.pop()||0;if(l-c<=o){for(let o=c;o<=l;o++){let s=i[2*o],h=i[2*o+1];s>=t&&s<=n&&h>=e&&h<=r&&u.push(a[o])}continue}let f=c+l>>1,d=i[2*f],M=i[2*f+1];d>=t&&d<=n&&M>=e&&M<=r&&u.push(a[f]),(0===h?t<=d:e<=M)&&(s.push(c),s.push(f-1),s.push(1-h)),(0===h?n>=d:r>=M)&&(s.push(f+1),s.push(l),s.push(1-h))}return u}within(t,e,n){if(!this._finished)throw Error("Data not yet indexed - call index.finish().");let{ids:r,coords:a,nodeSize:i}=this,o=[0,r.length-1,0],s=[],u=n*n;for(;o.length;){let h=o.pop()||0,l=o.pop()||0,c=o.pop()||0;if(l-c<=i){for(let n=c;n<=l;n++)nk(a[2*n],a[2*n+1],t,e)<=u&&s.push(r[n]);continue}let f=c+l>>1,d=a[2*f],M=a[2*f+1];nk(d,M,t,e)<=u&&s.push(r[f]),(0===h?t-n<=d:e-n<=M)&&(o.push(c),o.push(f-1),o.push(1-h)),(0===h?t+n>=d:e+n>=M)&&(o.push(f+1),o.push(l),o.push(1-h))}return s}constructor(t,e=64,n=Float64Array,r){if(isNaN(t)||t<0)throw Error("Unpexpected numItems value: ".concat(t,"."));this.numItems=+t,this.nodeSize=Math.min(Math.max(+e,2),65535),this.ArrayType=n,this.IndexArrayType=t<65536?Uint16Array:Uint32Array;let a=nz.indexOf(this.ArrayType),i=2*t*this.ArrayType.BYTES_PER_ELEMENT,o=t*this.IndexArrayType.BYTES_PER_ELEMENT,s=(8-o%8)%8;if(a<0)throw Error("Unexpected typed array class: ".concat(n,"."));r&&r instanceof ArrayBuffer?(this.data=r,this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+o+s,2*t),this._pos=2*t,this._finished=!0):(this.data=new ArrayBuffer(8+i+o+s),this.ids=new this.IndexArrayType(this.data,8,t),this.coords=new this.ArrayType(this.data,8+o+s,2*t),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+a]),new Uint16Array(this.data,2,1)[0]=e,new Uint32Array(this.data,4,1)[0]=t)}}function nL(t,e,n,r){nU(t,n,r),nU(e,2*n,2*r),nU(e,2*n+1,2*r+1)}function nU(t,e,n){let r=t[e];t[e]=t[n],t[n]=r}function nk(t,e,n,r){let a=t-n,i=e-r;return a*a+i*i}let nS={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:t=>t},nZ=Math.fround||(t=>e=>(t[0]=+e,t[0]))(new Float32Array(1));class nD{load(t){let{log:e,minZoom:n,maxZoom:r}=this.options;e&&console.time("total time");let a="prepare ".concat(t.length," points");e&&console.time(a),this.points=t;let i=[];for(let e=0;e<t.length;e++){let n=t[e];if(!n.geometry)continue;let[r,a]=n.geometry.coordinates,o=nZ(nR(r)),s=nZ(nV(a));i.push(o,s,1/0,e,-1,1),this.options.reduce&&i.push(0)}let o=this.trees[r+1]=this._createTree(i);e&&console.timeEnd(a);for(let t=r;t>=n;t--){let n=+Date.now();o=this.trees[t]=this._createTree(this._cluster(o,t)),e&&console.log("z%d: %d clusters in %dms",t,o.numItems,Date.now()-n)}return e&&console.timeEnd("total time"),this}getClusters(t,e){let n=((t[0]+180)%360+360)%360-180,r=Math.max(-90,Math.min(90,t[1])),a=180===t[2]?180:((t[2]+180)%360+360)%360-180,i=Math.max(-90,Math.min(90,t[3]));if(t[2]-t[0]>=360)n=-180,a=180;else if(n>a){let t=this.getClusters([n,r,180,i],e),o=this.getClusters([-180,r,a,i],e);return t.concat(o)}let o=this.trees[this._limitZoom(e)],s=o.range(nR(n),nV(i),nR(a),nV(r)),u=o.data,h=[];for(let t of s){let e=this.stride*t;h.push(u[e+5]>1?nB(u,e,this.clusterProps):this.points[u[e+3]])}return h}getChildren(t){let e=this._getOriginId(t),n=this._getOriginZoom(t),r="No cluster with the specified id.",a=this.trees[n];if(!a)throw Error(r);let i=a.data;if(e*this.stride>=i.length)throw Error(r);let o=this.options.radius/(this.options.extent*Math.pow(2,n-1)),s=i[e*this.stride],u=i[e*this.stride+1],h=a.within(s,u,o),l=[];for(let e of h){let n=e*this.stride;i[n+4]===t&&l.push(i[n+5]>1?nB(i,n,this.clusterProps):this.points[i[n+3]])}if(0===l.length)throw Error(r);return l}getLeaves(t,e,n){e=e||10,n=n||0;let r=[];return this._appendLeaves(r,t,e,n,0),r}getTile(t,e,n){let r=this.trees[this._limitZoom(t)],a=Math.pow(2,t),{extent:i,radius:o}=this.options,s=o/i,u=(n-s)/a,h=(n+1+s)/a,l={features:[]};return this._addTileFeatures(r.range((e-s)/a,u,(e+1+s)/a,h),r.data,e,n,a,l),0===e&&this._addTileFeatures(r.range(1-s/a,u,1,h),r.data,a,n,a,l),e===a-1&&this._addTileFeatures(r.range(0,u,s/a,h),r.data,-1,n,a,l),l.features.length?l:null}getClusterExpansionZoom(t){let e=this._getOriginZoom(t)-1;for(;e<=this.options.maxZoom;){let n=this.getChildren(t);if(e++,1!==n.length)break;t=n[0].properties.cluster_id}return e}_appendLeaves(t,e,n,r,a){for(let i of this.getChildren(e)){let e=i.properties;if(e&&e.cluster?a+e.point_count<=r?a+=e.point_count:a=this._appendLeaves(t,e.cluster_id,n,r,a):a<r?a++:t.push(i),t.length===n)break}return a}_createTree(t){let e=new nO(t.length/this.stride|0,this.options.nodeSize,Float32Array);for(let n=0;n<t.length;n+=this.stride)e.add(t[n],t[n+1]);return e.finish(),e.data=t,e}_addTileFeatures(t,e,n,r,a,i){for(let o of t){let t,s,u,h,l=o*this.stride,c=e[l+5]>1;if(c)t=nC(e,l,this.clusterProps),s=e[l],u=e[l+1];else{let n=this.points[e[l+3]];t=n.properties;let[r,a]=n.geometry.coordinates;s=nR(r),u=nV(a)}let f={type:1,geometry:[[Math.round(this.options.extent*(s*a-n)),Math.round(this.options.extent*(u*a-r))]],tags:t};void 0!==(h=c||this.options.generateId?e[l+3]:this.points[e[l+3]].id)&&(f.id=h),i.features.push(f)}}_limitZoom(t){return Math.max(this.options.minZoom,Math.min(Math.floor(+t),this.options.maxZoom+1))}_cluster(t,e){let{radius:n,extent:r,reduce:a,minPoints:i}=this.options,o=n/(r*Math.pow(2,e)),s=t.data,u=[],h=this.stride;for(let n=0;n<s.length;n+=h){if(s[n+2]<=e)continue;s[n+2]=e;let r=s[n],l=s[n+1],c=t.within(s[n],s[n+1],o),f=s[n+5],d=f;for(let t of c){let n=t*h;s[n+2]>e&&(d+=s[n+5])}if(d>f&&d>=i){let t,i=r*f,o=l*f,M=-1,m=((n/h|0)<<5)+(e+1)+this.points.length;for(let r of c){let u=r*h;if(s[u+2]<=e)continue;s[u+2]=e;let l=s[u+5];i+=s[u]*l,o+=s[u+1]*l,s[u+4]=m,a&&(t||(t=this._map(s,n,!0),M=this.clusterProps.length,this.clusterProps.push(t)),a(t,this._map(s,u)))}s[n+4]=m,u.push(i/d,o/d,1/0,m,-1,d),a&&u.push(M)}else{for(let t=0;t<h;t++)u.push(s[n+t]);if(d>1)for(let t of c){let n=t*h;if(!(s[n+2]<=e)){s[n+2]=e;for(let t=0;t<h;t++)u.push(s[n+t])}}}}return u}_getOriginId(t){return t-this.points.length>>5}_getOriginZoom(t){return(t-this.points.length)%32}_map(t,e,n){if(t[e+5]>1){let r=this.clusterProps[t[e+6]];return n?Object.assign({},r):r}let r=this.points[t[e+3]].properties,a=this.options.map(r);return n&&a===r?Object.assign({},a):a}constructor(t){this.options=Object.assign(Object.create(nS),t),this.trees=Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}}function nB(t,e,n){return{type:"Feature",id:t[e+3],properties:nC(t,e,n),geometry:{type:"Point",coordinates:[(t[e]-.5)*360,360*Math.atan(Math.exp((180-360*t[e+1])*Math.PI/180))/Math.PI-90]}}}function nC(t,e,n){let r=t[e+5],a=r>=1e4?"".concat(Math.round(r/1e3),"k"):r>=1e3?"".concat(Math.round(r/100)/10,"k"):r,i=t[e+6];return Object.assign(-1===i?{}:Object.assign({},n[i]),{cluster:!0,cluster_id:t[e+3],point_count:r,point_count_abbreviated:a})}function nR(t){return t/360+.5}function nV(t){let e=Math.sin(t*Math.PI/180),n=.5-.25*Math.log((1+e)/(1-e))/Math.PI;return n<0?0:n>1?1:n}var nY=t.i(974714);let nQ=t=>{let{items:e,radius:n=60,deps:r,viewState:a,renderItem:i,mapCanvas:o,renderCluster:s}=t,[u,h]=(0,nN.useState)(null),l=(0,nY.useStableObject)(e),c=(0,nT.default)(r);return(0,nN.useEffect)(()=>{let t=l.map(t=>{let{latitude:e,longitude:n}=t.coordinate;return{type:"Feature",properties:t,geometry:{type:"Point",coordinates:[n,e]}}}),e=new nD({minPoints:2,radius:n,minZoom:0,maxZoom:22});e.load(t),h(e)},[l,n]),(0,nN.useMemo)(()=>{if(!u||!o||!a)return[];let[[t,e],[n,r]]=new nI({...a,width:o.width,height:o.height}).getBounds();return u.getClusters([t-1,e-1,n+1,r+1],Math.round(a.zoom)).map(t=>{if(null==t.id)return i({item:t.properties});let e=u.getLeaves(t.id,1/0,0),[n,r]=t.geometry.coordinates,a=e.map(t=>t.properties);return s({items:a,itemIds:new Set(a.map(t=>t.api_id)),coordinate:{latitude:r,longitude:n}})})},[u,a,o,c])};t.s(["ClusterMarker",()=>nH],331461);var nX=t.i(391398),nK=t.i(359626),nG=t.i(272043);t.i(115266);var nW=t.i(992561);let nH=t=>{let{coordinate:e,focused:n,onFocus:r,onBlur:a,onClick:i,count:o,size:s="regular"}=t;return(0,nX.jsxs)(nW.Marker,{anchor:"center",latitude:e.latitude,longitude:e.longitude,children:[(0,nX.jsx)("div",{onMouseEnter:()=>null==r?void 0:r(),onMouseLeave:()=>null==a?void 0:a(),onClick:t=>{i&&(t.stopPropagation(),i())},className:"jsx-d183c7e5856584c1 outside-container",children:(0,nX.jsx)("div",{className:"jsx-d183c7e5856584c1 map-marker-container",children:(0,nX.jsx)("div",{className:"jsx-d183c7e5856584c1 "+((0,nG.default)("dot animated flex-center-center",s,{"two-digits":o>=10&&o<100,"three-digits":o>=100,focused:n,focusable:r||i})||""),children:o.toLocaleString()})})}),(0,nX.jsx)(nK.default,{id:"d183c7e5856584c1",children:".outside-container.jsx-d183c7e5856584c1{cursor:pointer;padding:.25rem}.outside-container.jsx-d183c7e5856584c1:hover .dot.focusable.jsx-d183c7e5856584c1:not(.focused){transform:scale(1.125)}.dot.jsx-d183c7e5856584c1{background:linear-gradient(to bottom,var(--brand-content-color),var(--brand-active-color));color:#fff;pointer-events:none;box-shadow:var(--shadow-map-marker);font-family:var(--font);width:1.625rem;height:1.625rem;font-size:var(--font-size-sm);border:1px solid #fff;border-radius:100%}.dot.small.jsx-d183c7e5856584c1{width:1.5rem;height:1.5rem;font-size:var(--font-size-xs)}.dot.two-digits.jsx-d183c7e5856584c1{font-size:var(--font-size-xs)}.dot.three-digits.jsx-d183c7e5856584c1,.dot.two-digits.small.jsx-d183c7e5856584c1{font-size:var(--font-size-xxs)}.dot.three-digits.small.jsx-d183c7e5856584c1{font-size:var(--font-size-xxxs)}.dot.focused.jsx-d183c7e5856584c1{background:linear-gradient(to bottom,var(--red-content),var(--red-active));box-shadow:var(--shadow-map-marker-selected);transform:scale(1.25)}"})]})};t.s(["EventMarker",()=>n$],669832);var nJ=t.i(318625);let n$=t=>{let{coordinate:e,href:n,focused:r,onFocus:a,onBlur:i,onClick:o}=t;return(0,nX.jsxs)(nW.Marker,{anchor:"center",latitude:e.latitude,longitude:e.longitude,children:[(0,nX.jsx)("div",{onMouseEnter:()=>null==a?void 0:a(),onMouseLeave:()=>null==i?void 0:i(),onClick:o,className:nK.default.dynamic([["4768741ffc036488",[o||n?"pointer":"default"]]])+" outside-container",children:(0,nX.jsx)("div",{className:nK.default.dynamic([["4768741ffc036488",[o||n?"pointer":"default"]]])+" map-marker-container",children:(0,nX.jsx)(nJ.OptionalLink,{href:null!=n?n:null,children:(0,nX.jsx)("div",{className:nK.default.dynamic([["4768741ffc036488",[o||n?"pointer":"default"]]])+" "+((0,nG.default)("dot animated",{focused:r})||"")})})})}),(0,nX.jsx)(nK.default,{id:"4768741ffc036488",dynamic:[o||n?"pointer":"default"],children:".outside-container.__jsx-style-dynamic-selector{cursor:".concat(o||n?"pointer":"default",";padding:.5rem}.dot.__jsx-style-dynamic-selector{background:linear-gradient(to bottom,var(--brand-content-color),var(--brand-active-color));box-shadow:var(--shadow-map-marker);pointer-events:none;transform-origin:50%;border:1px solid #fff;border-radius:100%;width:.75rem;height:.75rem}.dot.focused.__jsx-style-dynamic-selector{background:linear-gradient(to bottom,var(--red-content),var(--red-active));box-shadow:var(--shadow-map-marker-selected);transform:scale(1.25)}")})]})}}]);